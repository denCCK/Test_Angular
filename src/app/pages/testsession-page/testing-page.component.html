<meta charset="utf-8">
<div class="container">
  <div class="top-container">
    <form [formGroup]="form">
      <tui-filter
        formControlName="filters"
        [content]="content"
        [items]="items">
        <div class="filters-container">

        </div>
      </tui-filter>
    </form>
    <ng-template
      #content
      let-item
    >
      {{ item }}
    </ng-template>
    <tui-input
      formControlName="testValue"
      tuiTextfieldSize="m"
      [tuiTextfieldCleaner]="true"
      [tuiTextfieldLabelOutside]="true">
      Введите название тестирования
    </tui-input>
  </div>
  <div class="image-wrapper">
    <table class="tui-table">
      <tbody>
      <tr>
        <th class="tui-table__th tui-table__th_first">Наименование</th>
        <th class="tui-table__th">Время проведения</th>
        <th class="tui-table__th">Статус</th>
        <th class="tui-table__th">Дата создания</th>
        <th class="tui-table__th">Дата последнего изменения</th>
        <th class="tui-table__th tui-table__th_last">Ред./Удал.</th>
      </tr>
      </tbody>
      <tbody>
      <tr class="tui-table__tr tui-table__tr_border_none" *ngFor="let testsession of testsessions">
        <td class="tui-table__td tui-table__td_first">{{ testsession.testsessionName }}</td>
        <td class="tui-table__td">{{ testsession.startDate | date:'medium' }} - {{ testsession.endDate | date:'medium' }}</td>
        <td class="tui-table__td">{{ this.getTestsessionStatus(testsession) }}</td>
        <td class="tui-table__td">{{ testsession.creationDate | date:'medium' }}</td>
        <td class="tui-table__td">{{ testsession.lastChangeDate | date:'medium' }}</td>
        <td class="tui-table__td tui-table__td_last">
          <div class="three-column-container">
            <tui-svg (click)="showViewOverlay(testsession)" src="tuiIconShowLarge"></tui-svg>
            <tui-svg (click)="showEditOverlay(testsession, tests)" src="tuiIconEditLarge"></tui-svg>
            <tui-svg (click)="deleteTestsession(testsession.id)" src="tuiIconTrash2Large"></tui-svg>
          </div>
        </td>
      </tr>
      </tbody>
    </table>

  </div>
  <div class="bottom-container">
    <button tuiButton (click)="showAddOverlay()">Добавить</button>
    <button tuiButton (click)="loadTestsession()">Обновить</button>
    <div class="pagination-container">
      <tui-pagination
        size="l"
        [index]="index"
        [length]="length"
        (indexChange)="goToPage($event)"
      ></tui-pagination>
    </div>
  </div>
</div>

<app-testsession-add-overlay
  [isVisible]="isAddOverlayVisible"
  (close)="hideAddOverlay()">
</app-testsession-add-overlay>

<app-testsession-edit-overlay
  [testsession]="testsession"
  [tests]="tests"
  [isVisible]="isEditOverlayVisible" (close)="hideEditOverlay()">
</app-testsession-edit-overlay>

<app-testsession-view-overlay
  [testsession]="testsession"
  [isVisible]="isViewOverlayVisible" (close)="hideViewOverlay()">
</app-testsession-view-overlay>
